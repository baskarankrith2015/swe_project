/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
plugins{
id 'java'
//id 'distribution'
}
repositories{
	mavenCentral()
}

sourceSets {
	main {
		java{
		srcDirs= ['src/java']
		}
		resources {
            srcDirs = ['src/resource']
        }
	}	
}
dependencies {
 compile 	'javax.servlet:javax.servlet-api:3.1.0',
		'org.eclipse.jetty:jetty-servlet:9.4.0.v20161208',
         	'org.eclipse.jetty:jetty-server:9.4.0.v20161208',
         	'org.eclipse.jetty.http2:http2-client:9.4.0.v20161208',
         	'org.eclipse.jetty.http2:http2-http-client-transport:9.4.0.v20161208',
			'org.glassfish.jersey.connectors:jersey-apache-connector:2.25',
            'org.glassfish.jersey.core:jersey-client:2.25',
            'org.glassfish.jersey.core:jersey-common:2.25',
            'org.glassfish.jersey.core:jersey-server:2.25',
            'org.glassfish.jersey.containers:jersey-container-servlet-core:2.25',
            'org.glassfish.jersey.media:jersey-media-json-jackson:2.25',
            'org.glassfish.jersey.media:jersey-media-multipart:2.25',
            'org.glassfish.jersey.ext:jersey-bean-validation:2.25',
		 	'mysql:mysql-connector-java:5.1.44',
		 'junit:junit:4.12'

}

jar {
    manifest {
        attributes(("Main-Class"): "com.pancakes.ApplicationServer",
                ("Class-Path"): configurations.compile.collect { "lib/" + it.getName() })
    }



//    mainClassName = "com.pancakes.ApplicationServer"
}

task dist(type: Zip) {
    dependsOn jar
    baseName = "server-"
    from jar {    
        into "/"
    }
    into("/lib") {
        from configurations.runtime {
            exclude 'local'
            exclude 'com'
            exclude 'i18n'
            exclude 'META-INF'
        }
    }
   
 }


